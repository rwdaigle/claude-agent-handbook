{% set navPages = collections.all | eleventyNavigation %}

{% macro renderNavItem(entry, currentUrl) %}
<li>
  <a href="{{ entry.url }}"
     class="sidebar-link{% if entry.url == currentUrl %} sidebar-link-active{% endif %}">
    {{ entry.title }}
  </a>
  {% if entry.children.length %}
  <ul class="ml-4 mt-2 space-y-1">
    {% for child in entry.children %}
      {{ renderNavItem(child, currentUrl) }}
    {% endfor %}
  </ul>
  {% endif %}
</li>
{% endmacro %}

<div class="pr-6">
  <p class="text-xs uppercase tracking-widest mb-6" style="color: var(--color-ink-muted); font-weight: 600; letter-spacing: 0.1em;">
    Contents
  </p>
  <ul class="space-y-1">
    {% for entry in navPages %}
      {{ renderNavItem(entry, page.url) }}
    {% endfor %}
  </ul>
</div>
